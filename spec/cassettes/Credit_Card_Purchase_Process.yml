---
http_interactions:
- request:
    method: post
    uri: https://<ADYEN_API_USERNAME>:<ADYEN_API_PASSWORD>@pal-test.adyen.com/pal/servlet/soap/Payment
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0"?>
                <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <soap:Body>
                            <payment:authorise xmlns:payment="http://payment.services.adyen.com" xmlns:recurring="http://recurring.services.adyen.com" xmlns:common="http://common.services.adyen.com">
                  <payment:paymentRequest>
                    <payment:merchantAccount><ADYEN_MERCHANT_ACCOUNT></payment:merchantAccount>
                    <payment:reference>1</payment:reference>
                            <additionalAmount xmlns="http://payment.services.adyen.com" xsi:nil="true" />
                <additionalData xmlns="http://payment.services.adyen.com">
                  <entry>
                    <key xsi:type="xsd:string">card.encrypted.json</key>
                    <value xsi:type="xsd:string">adyenjs_0_1_17$JbPrRpGeTZxvlorDXl/AlvsVCJSoBnzvo80OWn1yRHobDfGTWscKrl477+YLoF+BLr3+BrRb7LerFyScEAjjxCwUZT1UO+yJe05yH81XV+6h+jNfZZKomynMIK5wJ6aePIP9MpptxSjFt/w7C0IJLhuDp3qVvKWiDhq8MXZWSnTsc5O4ZBpiBTBr4CWdKwivX834FdOPP9XFy+Uodkm0LN/ts8dfF6EXUJ0oUi+dHyURd+QjsGCI/uzJekQq7T1qrb31gykMQmRtfJhnIMFfwsI9KWVja7B3epkVNWujOuK8QXSkoKgH35l9Usp3XQcZ26k0AL4Fj6VnnOj+PgZ4zA==$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</value>
                  </entry>
                </additionalData>
                <payment:recurring>
                  <payment:contract>RECURRING,ONECLICK</payment:contract>
                </payment:recurring>
                <payment:amount>
                  <common:currency>USD</common:currency>
                  <common:value>0</common:value>
                </payment:amount>
                <payment:shopperReference>1</payment:shopperReference>
                <payment:shopperEmail>spree@example.com</payment:shopperEmail>
                <payment:shopperIP></payment:shopperIP>
                <payment:shopperStatement>R684875807</payment:shopperStatement>
                  </payment:paymentRequest>
                </payment:authorise>

                  </soap:Body>
                </soap:Envelope>
    headers:
      Accept:
      - text/xml
      Content-Type:
      - text/xml; charset=utf-8
      Soapaction:
      - authorise
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 02 May 2016 15:24:28 GMT
      Server:
      - Apache
      Set-Cookie:
      - JSESSIONID=25E235D65D02927B4DF9C9BEB6E5533F.test3e; Path=/pal/; Secure; HttpOnly
      Last-Modified:
      - Mon, 02 May 2016 15:24:28 GMT
      Transfer-Encoding:
      - chunked
      Content-Type:
      - text/xml;charset=UTF-8
    body:
      encoding: UTF-8
      string: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><ns1:authoriseResponse
        xmlns:ns1="http://payment.services.adyen.com"><ns1:paymentResult><additionalData
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><authCode xmlns="http://payment.services.adyen.com">59273</authCode><dccAmount
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><dccSignature xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><fraudResult xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><issuerUrl xmlns="http://payment.services.adyen.com" xsi:nil="true" /><md
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><paRequest xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><pspReference xmlns="http://payment.services.adyen.com">8514622026683072</pspReference><refusalReason
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><resultCode xmlns="http://payment.services.adyen.com">Authorised</resultCode></ns1:paymentResult></ns1:authoriseResponse></soap:Body></soap:Envelope>
    http_version: 
  recorded_at: Mon, 02 May 2016 15:24:28 GMT
- request:
    method: post
    uri: https://<ADYEN_API_USERNAME>:<ADYEN_API_PASSWORD>@pal-test.adyen.com/pal/servlet/soap/Recurring
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0"?>
                <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <soap:Body>
                        <recurring:listRecurringDetails xmlns:payment="http://payment.services.adyen.com" xmlns:recurring="http://recurring.services.adyen.com">
              <recurring:request>
                <recurring:recurring>
                  <payment:contract>RECURRING</payment:contract>
                </recurring:recurring>
                <recurring:merchantAccount><ADYEN_MERCHANT_ACCOUNT></recurring:merchantAccount>
                <recurring:shopperReference>1</recurring:shopperReference>
              </recurring:request>
            </recurring:listRecurringDetails>

                  </soap:Body>
                </soap:Envelope>
    headers:
      Accept:
      - text/xml
      Content-Type:
      - text/xml; charset=utf-8
      Soapaction:
      - listRecurringDetails
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 02 May 2016 15:24:28 GMT
      Server:
      - Apache
      Set-Cookie:
      - JSESSIONID=677FD9FFA9470BE1A8D5B410F528E21A.test104e; Path=/pal/; Secure;
        HttpOnly
      Pspreference:
      - '7914622026687972'
      Content-Length:
      - '1728'
      Content-Type:
      - text/xml;charset=utf-8
    body:
      encoding: UTF-8
      string: <?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><recurring:listRecurringDetailsResponse
        xmlns:recurring="http://recurring.services.adyen.com"><recurring:result><creationDate
        xmlns="http://recurring.services.adyen.com">2016-04-28T14:18:41+02:00</creationDate><details
        xmlns="http://recurring.services.adyen.com"><RecurringDetail><bank xsi:nil="true"
        /><card><billingAddress xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><brand xmlns="http://payment.services.adyen.com" xsi:nil="true" /><cvc xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><expiryMonth xmlns="http://payment.services.adyen.com">6</expiryMonth><expiryYear
        xmlns="http://payment.services.adyen.com">2016</expiryYear><holderName xmlns="http://payment.services.adyen.com">John
        Doe</holderName><issueNumber xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><number xmlns="http://payment.services.adyen.com">1111</number><startMonth
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><startYear xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /></card><creationDate>2016-04-28T14:18:41+02:00</creationDate><elv
        xsi:nil="true" /><name xsi:nil="true" /><recurringDetailReference>8414618459219534</recurringDetailReference><variant>visa</variant></RecurringDetail></details><lastKnownShopperEmail
        xmlns="http://recurring.services.adyen.com">spree@example.com</lastKnownShopperEmail><shopperReference
        xmlns="http://recurring.services.adyen.com">1</shopperReference></recurring:result></recurring:listRecurringDetailsResponse></soap:Body></soap:Envelope>
    http_version: 
  recorded_at: Mon, 02 May 2016 15:24:28 GMT
- request:
    method: post
    uri: https://<ADYEN_API_USERNAME>:<ADYEN_API_PASSWORD>@pal-test.adyen.com/pal/servlet/soap/Payment
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0"?>
                <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <soap:Body>
                            <payment:authorise xmlns:payment="http://payment.services.adyen.com" xmlns:recurring="http://recurring.services.adyen.com" xmlns:common="http://common.services.adyen.com">
                  <payment:paymentRequest>
                    <payment:merchantAccount><ADYEN_MERCHANT_ACCOUNT></payment:merchantAccount>
                    <payment:reference>R684875807-2EDSDSX4</payment:reference>
                            <payment:recurring>
                  <payment:contract>RECURRING</payment:contract>
                </payment:recurring>
                <payment:selectedRecurringDetailReference>8414618459219534</payment:selectedRecurringDetailReference>
                <payment:shopperInteraction>ContAuth</payment:shopperInteraction>
                <payment:amount>
                  <common:currency>USD</common:currency>
                  <common:value>2000</common:value>
                </payment:amount>
                <payment:shopperReference>1</payment:shopperReference>
                <payment:shopperEmail>spree@example.com</payment:shopperEmail>
                <payment:shopperIP></payment:shopperIP>
                <payment:shopperStatement>R684875807-2EDSDSX4</payment:shopperStatement><payment:captureDelayHours>0</payment:captureDelayHours>
                  </payment:paymentRequest>
                </payment:authorise>

                  </soap:Body>
                </soap:Envelope>
    headers:
      Accept:
      - text/xml
      Content-Type:
      - text/xml; charset=utf-8
      Soapaction:
      - authorise
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 02 May 2016 15:24:29 GMT
      Server:
      - Apache
      Set-Cookie:
      - JSESSIONID=0FDF7D1B5F5D030D75925C1E99651BEB.test103e; Path=/pal/; Secure;
        HttpOnly
      Last-Modified:
      - Mon, 02 May 2016 15:24:29 GMT
      Transfer-Encoding:
      - chunked
      Content-Type:
      - text/xml;charset=UTF-8
    body:
      encoding: UTF-8
      string: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><ns1:authoriseResponse
        xmlns:ns1="http://payment.services.adyen.com"><ns1:paymentResult><additionalData
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><authCode xmlns="http://payment.services.adyen.com">66210</authCode><dccAmount
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><dccSignature xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><fraudResult xmlns="http://payment.services.adyen.com" xsi:nil="true"
        /><issuerUrl xmlns="http://payment.services.adyen.com" xsi:nil="true" /><md
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><paRequest xmlns="http://payment.services.adyen.com"
        xsi:nil="true" /><pspReference xmlns="http://payment.services.adyen.com">8814622026690595</pspReference><refusalReason
        xmlns="http://payment.services.adyen.com" xsi:nil="true" /><resultCode xmlns="http://payment.services.adyen.com">Authorised</resultCode></ns1:paymentResult></ns1:authoriseResponse></soap:Body></soap:Envelope>
    http_version: 
  recorded_at: Mon, 02 May 2016 15:24:29 GMT
recorded_with: VCR 3.0.1
